<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc Ti·∫øng Anh</title>
    <style>
        body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f0f8ff; /* M√†u n·ªÅn nh·∫π nh√†ng */
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
    }

    .container {
        position: fixed;
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
        width: 90%;
        max-width: 600px;
    }

    #score {
        font-weight: 600;
        color: #007bff;
        padding: 10px;
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
    }

    select {
        width: calc(100% - 30px);
        padding: 12px;
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        appearance: none;
        background-image: linear-gradient(45deg, transparent 50%, gray 50%), linear-gradient(135deg, gray 50%, transparent 50%);
        background-position: calc(100% - 15px) calc(1em + 2px), calc(100% - 10px) calc(1em + 2px);
        background-size: 5px 5px, 5px 5px;
        background-repeat: no-repeat;
    }

    .header-answer, .body-answer {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
    }

    .answer-input {
        width: 60%;
        display: flex;
        align-items: center;
    }

    .answer-input input {
        width: calc(100% - 40px);
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: 8px;
        margin-left: 10px;
    }

    .pointer {
        cursor: pointer;
        font-size: 1.2em;
        color: #007bff;
    }

    .button-row {
        display: flex;
        justify-content: space-between;
        width: 38%;
    }

    button {
        padding: 12px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background-color: #007bff;
        color: white;
        font-weight: 600;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #0056b3;
    }

    #message {
        color: red;
        margin-top: 10px;
        font-weight: 600;
    }

    #english {
        color: #28a745;
        font-weight: 600;
        margin-top: 10px;
    }

    #vietnamese {
        color: #6c757d;
        margin-top: 5px;
    }

    .row {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
    }

    /* Responsive Design */
    @media (max-width: 600px) {
        .container {
            width: 95%;
            padding: 20px;
        }

        .body-answer {
            flex-direction: column;
        }

        .answer-input {
            width: 100%;
            margin-bottom: 10px;
        }

        .button-row {
            width: 100%;
            margin-top: 10px;
        }

        button {
            width: 48%;
        }

        .row {
            flex-direction: column;
            align-items: center;
        }

        .row button {
            width: 100%;
            margin-top: 10px;
        }
    }
    </style>
</head>

<body>
    <div class="container">
        <div class="header-answer">
            <div id="score" style="width: 200px">ƒêi·ªÉm: 0/0</div>
            <select id="voiceSelect"></select>
        </div>
        <div class="body-answer">
            <div class="answer-input">
                <span onclick="speak()" class="pointer">üîä</span>
                <input type="text" id="answer" style="width: 80%;" placeholder="Enter the answer..."
                    autocomplete="off">
            </div>
            <div class="button-row">
                <button onclick="checkAnswer()">‚úî Check </button>
                <button onclick="showAnswer()">üëÄ Answer</button>
            </div>
        </div>
        <p id="message"></p>
        <p id="english" style="color: green; font-weight: bold;"></p>
        <p id="vietnamese" class="text-gray"></p>
        <div class="row">
            <button onclick="prevSentence()">‚¨Ö Pre</button>
            <button onclick="nextSentence()">Next ‚û°</button>
        </div>
    </div>

    <script>
        const sentences = [
            { en: "The weather is nice today.", vi: "Th·ªùi ti·∫øt h√¥m nay ƒë·∫πp." },
            { en: "I love learning new languages.", vi: "T√¥i th√≠ch h·ªçc ng√¥n ng·ªØ m·ªõi." },
            { en: "Practice makes perfect.", vi: "Luy·ªán t·∫≠p l√†m n√™n ho√†n h·∫£o." },
            { en: "She is reading a book.", vi: "C√¥ ·∫•y ƒëang ƒë·ªçc s√°ch." },
            { en: "They are playing football.", vi: "H·ªç ƒëang ch∆°i b√≥ng ƒë√°." },
            { en: "I have a meeting at 3 PM.", vi: "T√¥i c√≥ m·ªôt cu·ªôc h·ªçp l√∫c 3 gi·ªù chi·ªÅu." },
            { en: "Can you help me, please?", vi: "B·∫°n c√≥ th·ªÉ gi√∫p t√¥i kh√¥ng?" },
            { en: "Where is the nearest bus stop?", vi: "Tr·∫°m xe bu√Ωt g·∫ßn nh·∫•t ·ªü ƒë√¢u?" },
            { en: "I need to buy some groceries.", vi: "T√¥i c·∫ßn mua m·ªôt s·ªë th·ª±c ph·∫©m." },
            { en: "This is my favorite song.", vi: "ƒê√¢y l√† b√†i h√°t y√™u th√≠ch c·ªßa t√¥i." },
            { en: "Let's go to the park.", vi: "H√£y ƒëi ƒë·∫øn c√¥ng vi√™n." },
            { en: "What time does the train arrive?", vi: "Chuy·∫øn t√†u ƒë·∫øn l√∫c m·∫•y gi·ªù?" },
            { en: "She speaks English fluently.", vi: "C√¥ ·∫•y n√≥i ti·∫øng Anh tr√¥i ch·∫£y." },
            { en: "I will call you later.", vi: "T√¥i s·∫Ω g·ªçi cho b·∫°n sau." },
            { en: "My father is a doctor.", vi: "B·ªë t√¥i l√† b√°c sƒ©." },
            { en: "This coffee is too hot.", vi: "C√† ph√™ n√†y qu√° n√≥ng." },
            { en: "We need more chairs.", vi: "Ch√∫ng t√¥i c·∫ßn th√™m gh·∫ø." },
            { en: "He drives a red car.", vi: "Anh ·∫•y l√°i m·ªôt chi·∫øc xe m√†u ƒë·ªè." },
            { en: "It's raining outside.", vi: "Tr·ªùi ƒëang m∆∞a b√™n ngo√†i." },
            { en: "She has long hair.", vi: "C√¥ ·∫•y c√≥ m√°i t√≥c d√†i." },
            { en: "I forgot my keys.", vi: "T√¥i qu√™n ch√¨a kh√≥a c·ªßa m√¨nh." },
            { en: "Do you like spicy food?", vi: "B·∫°n c√≥ th√≠ch ƒë·ªì ƒÉn cay kh√¥ng?" },
            { en: "We are going on vacation next week.", vi: "Ch√∫ng t√¥i s·∫Ω ƒëi ngh·ªâ v√†o tu·∫ßn t·ªõi." },
            { en: "This dress looks beautiful.", vi: "Chi·∫øc v√°y n√†y tr√¥ng ƒë·∫πp qu√°." },
            { en: "I have never been to Japan.", vi: "T√¥i ch∆∞a bao gi·ªù ƒë·∫øn Nh·∫≠t B·∫£n." },
            { en: "He is watching TV now.", vi: "Anh ·∫•y ƒëang xem TV b√¢y gi·ªù." },
            { en: "Let's meet at the cafe.", vi: "H√£y g·∫∑p nhau ·ªü qu√°n c√† ph√™." },
            { en: "This is a difficult question.", vi: "ƒê√¢y l√† m·ªôt c√¢u h·ªèi kh√≥." },
            { en: "She loves painting.", vi: "C√¥ ·∫•y th√≠ch v·∫Ω tranh." },
            { en: "We should go home now.", vi: "Ch√∫ng ta n√™n v·ªÅ nh√† ngay." },
            { en: "I need to wake up early tomorrow.", vi: "T√¥i c·∫ßn d·∫≠y s·ªõm v√†o ng√†y mai." },
            { en: "She is good at playing the piano.", vi: "C√¥ ·∫•y gi·ªèi ch∆°i ƒë√†n piano." },
            { en: "The movie was very interesting.", vi: "B·ªô phim r·∫•t th√∫ v·ªã." },
            { en: "He likes to travel around the world.", vi: "Anh ·∫•y th√≠ch ƒëi du l·ªãch kh·∫Øp th·∫ø gi·ªõi." },
            { en: "I will send you an email.", vi: "T√¥i s·∫Ω g·ª≠i cho b·∫°n m·ªôt email." },
            { en: "My house is near the river.", vi: "Nh√† t√¥i g·∫ßn con s√¥ng." },
            { en: "This cake is very delicious.", vi: "Chi·∫øc b√°nh n√†y r·∫•t ngon." },
            { en: "They are waiting for the bus.", vi: "H·ªç ƒëang ƒë·ª£i xe bu√Ωt." },
            { en: "Can you speak more slowly?", vi: "B·∫°n c√≥ th·ªÉ n√≥i ch·∫≠m h∆°n kh√¥ng?" },
            { en: "She always wakes up early.", vi: "C√¥ ·∫•y lu√¥n d·∫≠y s·ªõm." },
            { en: "I need to charge my phone.", vi: "T√¥i c·∫ßn s·∫°c ƒëi·ªán tho·∫°i." },
            { en: "My sister is studying in the library.", vi: "Em g√°i t√¥i ƒëang h·ªçc ·ªü th∆∞ vi·ªán." },
            { en: "We are having dinner now.", vi: "Ch√∫ng t√¥i ƒëang ƒÉn t·ªëi b√¢y gi·ªù." },
            { en: "He is very kind to everyone.", vi: "Anh ·∫•y r·∫•t t·ªët v·ªõi m·ªçi ng∆∞·ªùi." },
            { en: "The restaurant is very crowded today.", vi: "Nh√† h√†ng h√¥m nay r·∫•t ƒë√¥ng." },
            { en: "She is writing an article.", vi: "C√¥ ·∫•y ƒëang vi·∫øt m·ªôt b√†i b√°o." },
            { en: "Let's take a break.", vi: "H√£y ngh·ªâ m·ªôt ch√∫t ƒëi." },
            { en: "I am feeling tired.", vi: "T√¥i c·∫£m th·∫•y m·ªát." },
            { en: "He works as a software engineer.", vi: "Anh ·∫•y l√†m k·ªπ s∆∞ ph·∫ßn m·ªÅm." },
            { en: "This hotel has a swimming pool.", vi: "Kh√°ch s·∫°n n√†y c√≥ h·ªì b∆°i." },
            { en: "I need to buy a new laptop.", vi: "T√¥i c·∫ßn mua m·ªôt chi·∫øc laptop m·ªõi." },
            { en: "She is wearing a beautiful dress.", vi: "C√¥ ·∫•y ƒëang m·∫∑c m·ªôt chi·∫øc v√°y ƒë·∫πp." },
            { en: "The book is on the table.", vi: "Cu·ªën s√°ch ·ªü tr√™n b√†n." },
            { en: "They are talking about the project.", vi: "H·ªç ƒëang n√≥i v·ªÅ d·ª± √°n." },
            { en: "Do you have any brothers or sisters?", vi: "B·∫°n c√≥ anh ch·ªã em n√†o kh√¥ng?" },
            { en: "The cat is sleeping under the chair.", vi: "Con m√®o ƒëang ng·ªß d∆∞·ªõi gh·∫ø." },
            { en: "I need some time to think.", vi: "T√¥i c·∫ßn ch√∫t th·ªùi gian ƒë·ªÉ suy nghƒ©." },
            { en: "We are planning a trip to the beach.", vi: "Ch√∫ng t√¥i ƒëang l√™n k·∫ø ho·∫°ch ƒëi bi·ªÉn." },
            { en: "She is afraid of heights.", vi: "C√¥ ·∫•y s·ª£ ƒë·ªô cao." },
            { en: "I enjoy reading books in my free time.", vi: "T√¥i th√≠ch ƒë·ªçc s√°ch v√†o th·ªùi gian r·∫£nh." },
            { en: "The sun is shining brightly.", vi: "M·∫∑t tr·ªùi ƒëang chi·∫øu s√°ng r·ª±c r·ª°." },
            { en: "My parents are very supportive.", vi: "B·ªë m·∫π t√¥i r·∫•t ·ªßng h·ªô t√¥i." },
            { en: "He is learning to cook.", vi: "Anh ·∫•y ƒëang h·ªçc n·∫•u ƒÉn." },
            { en: "She likes listening to music.", vi: "C√¥ ·∫•y th√≠ch nghe nh·∫°c." },
            { en: "The bus is running late.", vi: "Xe bu√Ωt ƒëang b·ªã tr·ªÖ." },
            { en: "We had a great time at the party.", vi: "Ch√∫ng t√¥i ƒë√£ c√≥ kho·∫£ng th·ªùi gian tuy·ªát v·ªùi ·ªü b·ªØa ti·ªác." },
            { en: "She can swim very well.", vi: "C√¥ ·∫•y b∆°i r·∫•t gi·ªèi." },
            { en: "I need to drink some water.", vi: "T√¥i c·∫ßn u·ªëng m·ªôt ch√∫t n∆∞·ªõc." },
            { en: "He is a very funny person.", vi: "Anh ·∫•y l√† m·ªôt ng∆∞·ªùi r·∫•t h√†i h∆∞·ªõc." },
            { en: "They are discussing an important topic.", vi: "H·ªç ƒëang th·∫£o lu·∫≠n m·ªôt ch·ªß ƒë·ªÅ quan tr·ªçng." },
            { en: "The train station is not far from here.", vi: "Nh√† ga kh√¥ng xa l·∫Øm t·ª´ ƒë√¢y." },
            { en: "The sun rises in the east.", vi: "M·∫∑t tr·ªùi m·ªçc ·ªü h∆∞·ªõng ƒë√¥ng." },
            { en: "Water boils at 100 degrees Celsius.", vi: "N∆∞·ªõc s√¥i ·ªü 100 ƒë·ªô C." },
            { en: "Cats are independent animals.", vi: "M√®o l√† lo√†i ƒë·ªông v·∫≠t ƒë·ªôc l·∫≠p." },
            { en: "Dogs are loyal companions.", vi: "Ch√≥ l√† nh·ªØng ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh trung th√†nh." },
            { en: "I enjoy reading before bed.", vi: "T√¥i th√≠ch ƒë·ªçc s√°ch tr∆∞·ªõc khi ƒëi ng·ªß." },
            { en: "She loves to paint landscapes.", vi: "C√¥ ·∫•y th√≠ch v·∫Ω tranh phong c·∫£nh." },
            { en: "He plays the guitar beautifully.", vi: "Anh ·∫•y ch∆°i ƒë√†n guitar r·∫•t hay." },
            { en: "We are learning about space.", vi: "Ch√∫ng t√¥i ƒëang h·ªçc v·ªÅ v≈© tr·ª•." },
            { en: "They visited the museum yesterday.", vi: "H·ªç ƒë√£ ƒë·∫øn thƒÉm b·∫£o t√†ng ng√†y h√¥m qua." },
            { en: "The flowers are blooming in the garden.", vi: "Nh·ªØng b√¥ng hoa ƒëang n·ªü trong v∆∞·ªùn." },
            { en: "I like to drink coffee in the morning.", vi: "T√¥i th√≠ch u·ªëng c√† ph√™ v√†o bu·ªïi s√°ng." },
            { en: "She prefers tea with milk.", vi: "C√¥ ·∫•y th√≠ch tr√† v·ªõi s·ªØa." },
            { en: "He is studying for his exams.", vi: "Anh ·∫•y ƒëang √¥n thi." },
            { en: "We are planning a picnic this weekend.", vi: "Ch√∫ng t√¥i ƒëang l√™n k·∫ø ho·∫°ch cho m·ªôt bu·ªïi d√£ ngo·∫°i cu·ªëi tu·∫ßn n√†y." },
            { en: "They are building a new house.", vi: "H·ªç ƒëang x√¢y m·ªôt ng√¥i nh√† m·ªõi." },
            { en: "The birds are singing in the trees.", vi: "Chim ƒëang h√≥t tr√™n c√¢y." },
            { en: "I need to buy a new phone.", vi: "T√¥i c·∫ßn mua m·ªôt chi·∫øc ƒëi·ªán tho·∫°i m·ªõi." },
            { en: "She is cooking dinner for her family.", vi: "C√¥ ·∫•y ƒëang n·∫•u b·ªØa t·ªëi cho gia ƒë√¨nh." },
            { en: "He is driving to work.", vi: "Anh ·∫•y ƒëang l√°i xe ƒëi l√†m." },
            { en: "We are watching a movie tonight.", vi: "Ch√∫ng t√¥i s·∫Ω xem phim t·ªëi nay." },
            { en: "They are traveling to Europe next month.", vi: "H·ªç s·∫Ω ƒëi du l·ªãch ch√¢u √Çu v√†o th√°ng t·ªõi." },
            { en: "The children are playing in the park.", vi: "Tr·∫ª em ƒëang ch∆°i trong c√¥ng vi√™n." },
            { en: "I am going to the store.", vi: "T√¥i ƒëang ƒëi ƒë·∫øn c·ª≠a h√†ng." },
            { en: "She is taking a walk.", vi: "C√¥ ·∫•y ƒëang ƒëi d·∫°o." },
            { en: "He is listening to music.", vi: "Anh ·∫•y ƒëang nghe nh·∫°c." },
            { en: "We are eating lunch.", vi: "Ch√∫ng t√¥i ƒëang ƒÉn tr∆∞a." },
            { en: "They are studying English.", vi: "H·ªç ƒëang h·ªçc ti·∫øng Anh." },
            { en: "The car is parked in the garage.", vi: "Xe √¥ t√¥ ƒëang ƒë·ªó trong gara." },
            { en: "I am happy to see you.", vi: "T√¥i r·∫•t vui khi g·∫∑p b·∫°n." },
        ];


        let index = 0;
        let speechInstance = null;
        let speakTimeout;
        let score = 0;
        let showedAnswer = [];

        function updateSentence() {
            document.getElementById("answer").value = "";
            document.getElementById("message").textContent = "";
            document.getElementById("vietnamese").style.display = "none";
            document.getElementById("english").style.display = "none";
        }

        function populateVoices() {
            const voiceSelect = document.getElementById("voiceSelect");
            const voices = speechSynthesis.getVoices().filter(voice => voice.lang.startsWith("en"));

            voiceSelect.innerHTML = voices.map(voice => `<option value="${voice.name}">${voice.name}</option>`).join("");

            const defaultVoice = voices.find(voice => voice.name === "Google UK English Male") || voices[0];
            if (defaultVoice) {
                voiceSelect.value = defaultVoice.name;
            }
        }

        function speak(repeat = 1, delay = 3000) {
            if (speechInstance) {
                speechSynthesis.cancel();
                clearTimeout(speakTimeout);
            }

            speechInstance = new SpeechSynthesisUtterance(sentences[index].en);
            speechInstance.lang = "en-GB";
            speechInstance.rate = 1;
            const selectedVoice = document.getElementById("voiceSelect").value;
            speechInstance.voice = speechSynthesis.getVoices().find(voice => voice.name === selectedVoice);

            let count = 0;
            function speakAgain() {
                if (count < repeat) {
                    speechSynthesis.speak(speechInstance);
                    count++;
                    speakTimeout = setTimeout(() => {
                        if (count < repeat) speakAgain();
                    }, delay);
                }
            }
            speakAgain();
        }

        function checkAnswer() {
            const userAnswer = document.getElementById("answer").value.trim().replace(/[.,?!]/g, "");
            const correctAnswer = sentences[index].en.replace(/[.,?!]/g, "");

            if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                console.log("showedAnswer111: ", showedAnswer)
                console.log("showedAnswer111: ", index)

                if (!showedAnswer.includes(index)) {
                    score++;
                    console.log("da vao: ", score)
                    showedAnswer.push(index);
                }
                document.getElementById("message").textContent = "‚úÖ Ch√≠nh x√°c!";
                document.getElementById("message").style.color = "green";
                document.getElementById("vietnamese").textContent = sentences[index].vi;
                document.getElementById("vietnamese").style.display = "block";
                document.getElementById("english").textContent = sentences[index].en;
                document.getElementById("english").style.display = "block";
                updateScore();
            } else {
                document.getElementById("message").textContent = "‚ùå Sai r·ªìi! H√£y th·ª≠ l·∫°i.";
                document.getElementById("message").style.color = "red";
            }
        }

        function nextSentence() {
            speechSynthesis.cancel();
            clearTimeout(speakTimeout);
            index = (index + 1) % sentences.length;
            updateSentence();
            speak(3);
        }

        function prevSentence() {
            speechSynthesis.cancel();
            clearTimeout(speakTimeout);
            index = (index - 1 + sentences.length) % sentences.length;
            updateSentence();
            speak(3);
        }

        document.addEventListener("keydown", function (event) {
            if (event.altKey && event.key === "ArrowRight") {
                nextSentence();
            } else if (event.altKey && event.key === "ArrowLeft") {
                prevSentence();
            } else if (event.key === "Enter") {
                checkAnswer();
            }
        });

        function showAnswer() {
            document.getElementById("english").textContent = sentences[index].en;
            document.getElementById("english").style.display = "block";
            if (!showedAnswer.includes(index)) {
                showedAnswer.push(index);
            }
            console.log("showedAnswer: ", showedAnswer)
        }

        function updateScore() {
            document.getElementById("score").textContent = `ƒêi·ªÉm: ${score}/${sentences.length}`;
        }

        speechSynthesis.onvoiceschanged = populateVoices;

        window.onload = () => {
            populateVoices();
            setTimeout(() => {
                speak(1);
            }, 500);
            updateScore();
        };
    </script>
</body>

</html>
